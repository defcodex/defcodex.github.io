---
---
<!doctype html>
<html lang="{{ site.lang | default: 'en' }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ page.title }} | {{ site.title }}</title>
    {%- seo -%}
    <meta name="google-site-verification" content="BnYi8QG6r4gw74jhzry-W7LS5h4nfYFpJWD9aCh8i00">
    <!-- Cayman theme stylesheet -->
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <!-- Custom overrides -->
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    <link rel="alternate" type="application/atom+xml" href="{{ '/feed.xml' | relative_url }}">

    <!-- Minimal, modern badge styling for counters -->
    <style>
      .counter-wrap { display:flex; gap:.5rem; align-items:center; margin:.25rem 0 1rem; }
      .counter-pill {
        display:inline-flex; align-items:center; gap:.4rem;
        padding:.25rem .6rem; border:1px solid var(--border-color, #e5e7eb);
        border-radius:999px; background:var(--pill-bg, rgba(0,0,0,.04));
        font-size:.875rem; line-height:1.25rem;
      }
      .counter-pill svg { width:1rem; height:1rem; opacity:.75; flex:0 0 auto; }
      .site-stats { margin-top: 1rem; }
      @media (prefers-color-scheme: dark) {
        .counter-pill { border-color: rgba(255,255,255,.18); background: rgba(255,255,255,.06); }
      }
    </style>

    <!-- Universal view counter helper with fallback: CountAPI -> hits.sh -->
    <script>
      // Expose a single helper to fetch counters with graceful fallback.
      window.fetchCounter = async function ({ namespace, key }) {
        const fmt = (n) => new Intl.NumberFormat().format(n);

        // Provider 1: CountAPI
        try {
          const url1 = `https://api.countapi.xyz/hit/${encodeURIComponent(namespace)}/${encodeURIComponent(key)}`;
          const r1 = await fetch(url1, { cache: 'no-store' });
          if (r1.ok) {
            const d1 = await r1.json();
            if (typeof d1?.value === 'number') return fmt(d1.value);
          }
        } catch (_) { /* ignore */ }

        // Provider 2: hits.sh (returns { hits: N })
        try {
          // Build a path like: defcodex.github.io/<key>
          const path = `${namespace}/${(key || 'home').replace(/^\/+/, '')}`.replace(/\/+$/, '');
          const url2 = `https://hits.sh/${encodeURIComponent(path)}.json?secure=1`;
          const r2 = await fetch(url2, { cache: 'no-store' });
          if (r2.ok) {
            const d2 = await r2.json();
            if (typeof d2?.hits === 'number') return fmt(d2.hits);
          }
        } catch (_) { /* ignore */ }

        return '—'; // if all fail
      };
    </script>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">
        <a href="{{ '/' | relative_url }}" class="no-underline">{{ site.title }}</a>
      </h1>
      {%- if site.description -%}
      <h2 class="project-tagline">{{ site.description }}</h2>
      {%- endif -%}
      <nav class="header-nav" aria-label="Primary">
        <a class="btn" href="{{ '/' | relative_url }}">Home</a>
        <a class="btn" href="{{ '/blog/' | relative_url }}">Blog</a>
        <a class="btn" href="{{ '/tools/' | relative_url }}">Tools</a>
        <a class="btn" href="{{ '/about/' | relative_url }}">About</a>
        <a class="btn" href="{{ '/contact/' | relative_url }}">Contact</a>
      </nav>
    </section>

    <section class="main-content container post">
      <article class="post-article">
        <h1 class="post-title">{{ page.title }}</h1>

        <!-- per-post view counter -->
        <div class="post-stats counter-wrap" aria-live="polite">
          <span class="counter-pill" title="Views">
            <!-- eye icon -->
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M1.5 12s3.5-7.5 10.5-7.5S22.5 12 22.5 12s-3.5 7.5-10.5 7.5S1.5 12 1.5 12Z" stroke="currentColor"/>
              <circle cx="12" cy="12" r="3.5" stroke="currentColor" />
            </svg>
            <strong id="view-count">—</strong>
          </span>
        </div>
        <script>
          (function() {
            // Namespace from _config.yml (fallback to default if missing)
            const ns = '{{ site.counter.namespace | default: "defcodex.github.io" }}';
            // Per-post key: canonical Jekyll URL, normalized (strip trailing slash; root -> 'home')
            const rawKey = '{{ page.url }}';
            const key = (rawKey || '/').replace(/\/+$/, '') || 'home';

            window.fetchCounter({ namespace: ns, key })
              .then(val => { const el = document.getElementById('view-count'); if (el) el.textContent = val; });
          })();
        </script>

        <p class="post-meta">
          <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%b %d, %Y" }}</time>
          {%- if page.categories and page.categories.size > 0 -%}
            · {{ page.categories | join: ", " }}
          {%- endif -%}
        </p>

        <div class="post-content">
          {{ content }}
        </div>
      </article>

      <footer class="site-footer">
        <p>© {{ site.time | date: '%Y' }} {{ site.title }} ·
          <a href="{{ '/rss/' | relative_url }}">RSS</a>
        </p>
      </footer>

      <!-- site-wide total view counter (optional on post pages) -->
      <div class="site-stats counter-wrap" aria-live="polite">
        <span class="counter-pill" title="Total site views">
          <!-- eye icon -->
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M1.5 12s3.5-7.5 10.5-7.5S22.5 12 22.5 12s-3.5 7.5-10.5 7.5S1.5 12 1.5 12Z" stroke="currentColor"/>
            <circle cx="12" cy="12" r="3.5" stroke="currentColor" />
          </svg>
          <strong id="site-views">—</strong>
        </span>
      </div>
      <script>
        (function() {
          const ns  = '{{ site.counter.namespace | default: "defcodex.github.io" }}';
          const key = '{{ site.counter.site_total_key | default: "site-total" }}';

          window.fetchCounter({ namespace: ns, key })
            .then(val => { const el = document.getElementById('site-views'); if (el) el.textContent = val; });
        })();
      </script>
    </section>
  </body>
</html>
